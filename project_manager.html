<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Infrastructure Project Manager</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">Government of Canada</a>

            <button class="navbar-toggle" onclick="document.querySelector('.navbar-menu').classList.toggle('active')">
                ☰
            </button>

            <ul class="navbar-menu">
                <li class="navbar-item">
                    <a href="index.html" class="navbar-link active">Home</a>
                </li>
                <li class="navbar-item">
                    <a href="partners.html" class="navbar-link">Partners</a>
                </li>
                <li class="navbar-item">
                    <a href="about.html" class="navbar-link">About</a>
                </li>
                <li class="navbar-item">
                    <a href="project_manager.html" class="navbar-link">Admin</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <h1>Admin Dashboard</h1>

        <!-- Tab Navigation -->
        <div style="margin-bottom: 30px; border-bottom: 2px solid #ddd;">
            <button onclick="switchTab('projects')" id="projectsTab"
                style="padding: 15px 30px; border: none; background: #1a73e8; color: white; cursor: pointer; font-size: 16px; border-radius: 5px 5px 0 0; margin-right: 5px;">Projects</button>
            <button onclick="switchTab('companies')" id="companiesTab"
                style="padding: 15px 30px; border: none; background: #eee; color: #333; cursor: pointer; font-size: 16px; border-radius: 5px 5px 0 0; margin-right: 5px;">Companies</button>
            <button onclick="switchTab('assignments')" id="assignmentsTab"
                style="padding: 15px 30px; border: none; background: #eee; color: #333; cursor: pointer; font-size: 16px; border-radius: 5px 5px 0 0;">Assignments</button>
        </div>

        <!-- PROJECTS SECTION -->
        <div id="projectsSection">
            <h2>Project Manager</h2>

            <div class="controls">
                <div class="btn-group">
                    <button class="btn-primary" onclick="openAddModal()">Add New Project</button>
                    <button class="btn-success" onclick="loadProjects()">Refresh</button>
                    <input type="file" id="actual-btn" accept=".json,.xml" hidden />
                    <label for="actual-btn"
                        style="padding: 0.75em 1.8em; background: #1a73e8; color: white; border-radius: 4px; cursor: pointer; font-weight: 500; display: inline-block;">Import</label>
                </div>

                <div class="filters">
                    <div class="filter-group">
                        <label>Filter by Province:</label>
                        <select id="provinceFilter" onchange="applyFilters()">
                            <option value="">All Provinces</option>
                            <option value="Alberta">Alberta</option>
                            <option value="British Columbia">British Columbia</option>
                            <option value="Manitoba">Manitoba</option>
                            <option value="New Brunswick">New Brunswick</option>
                            <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                            <option value="Nova Scotia">Nova Scotia</option>
                            <option value="Ontario">Ontario</option>
                            <option value="Prince Edward Island">Prince Edward Island</option>
                            <option value="Quebec">Quebec</option>
                            <option value="Saskatchewan">Saskatchewan</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label>Filter by Status:</label>
                        <select id="statusFilter" onchange="applyFilters()">
                            <option value="">All Statuses</option>
                            <option value="planning">Planning</option>
                            <option value="in-progress">In Progress</option>
                            <option value="completed">Completed</option>
                            <option value="on-hold">On Hold</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label>Search:</label>
                        <input type="text" id="searchInput" placeholder="Search projects..." oninput="applyFilters()">
                    </div>
                </div>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value" id="totalProjects">0</div>
                    <div class="stat-label">Total Projects</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalBudget">$0</div>
                    <div class="stat-label">Total Budget</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgBudget">$0</div>
                    <div class="stat-label">Average Budget</div>
                </div>
            </div>

            <div id="message"></div>
            <div id="loading" class="loading" style="display: none;">Loading...</div>
            <div id="projectsContainer" class="projects-grid"></div>
        </div>

        <!-- COMPANIES SECTION -->
        <div id="companiesSection" style="display: none;">
            <h2>Company Manager</h2>

            <div class="controls">
                <div class="btn-group">
                    <button class="btn-primary" onclick="openAddCompanyModal()">Add New Company</button>
                    <button class="btn-success" onclick="loadCompanies()">Refresh</button>
                </div>

                <div class="filters">
                    <div class="filter-group">
                        <label>Filter by Province:</label>
                        <select id="companyProvinceFilter" onchange="applyCompanyFilters()">
                            <option value="">All Provinces</option>
                            <option value="Alberta">Alberta</option>
                            <option value="British Columbia">British Columbia</option>
                            <option value="Manitoba">Manitoba</option>
                            <option value="New Brunswick">New Brunswick</option>
                            <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                            <option value="Nova Scotia">Nova Scotia</option>
                            <option value="Ontario">Ontario</option>
                            <option value="Prince Edward Island">Prince Edward Island</option>
                            <option value="Quebec">Quebec</option>
                            <option value="Saskatchewan">Saskatchewan</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label>Search:</label>
                        <input type="text" id="companySearchInput" placeholder="Search companies..."
                            oninput="applyCompanyFilters()">
                    </div>
                </div>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value" id="totalCompanies">0</div>
                    <div class="stat-label">Total Companies</div>
                </div>
            </div>

            <div id="companyMessage"></div>
            <div id="companyLoading" class="loading" style="display: none;">Loading...</div>
            <div id="companiesContainer" class="projects-grid"></div>
        </div>

        <!-- ASSIGNMENTS SECTION -->
        <div id="assignmentsSection" style="display: none;">
            <h2>Assignment Manager</h2>

            <div class="controls">
                <div class="btn-group">
                    <button class="btn-primary" onclick="openAddAssignmentModal()">Add New Assignment</button>
                    <button class="btn-success" onclick="loadAssignments()">Refresh</button>
                </div>

                <div class="filters">
                    <div class="filter-group">
                        <label>Search:</label>
                        <input type="text" id="assignmentSearchInput" placeholder="Search assignments..."
                            oninput="applyAssignmentFilters()">
                    </div>
                </div>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value" id="totalAssignments">0</div>
                    <div class="stat-label">Total Assignments</div>
                </div>
            </div>

            <div id="assignmentMessage"></div>
            <div id="assignmentLoading" class="loading" style="display: none;">Loading...</div>
            <div id="assignmentsContainer" class="projects-grid"></div>
        </div>
    </div>

    <!-- Add/Edit Project Modal -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Project</h2>
                <button class="close" onclick="closeModal()">×</button>
            </div>
            <form id="projectForm" onsubmit="saveProject(event)">
                <div class="form-group">
                    <label>Project Name *</label>
                    <input type="text" id="projectName" required>
                </div>
                <div class="form-group">
                    <label>Budget ($) *</label>
                    <input type="number" id="projectBudget" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Status *</label>
                    <select id="projectStatus" required>
                        <option value="">Select status...</option>
                        <option value="planning">Planning</option>
                        <option value="in-progress">In Progress</option>
                        <option value="completed">Completed</option>
                        <option value="on-hold">On Hold</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Province *</label>
                    <select id="projectProvince" required>
                        <option value="">Select province...</option>
                        <option value="Alberta">Alberta</option>
                        <option value="British Columbia">British Columbia</option>
                        <option value="Manitoba">Manitoba</option>
                        <option value="New Brunswick">New Brunswick</option>
                        <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                        <option value="Nova Scotia">Nova Scotia</option>
                        <option value="Ontario">Ontario</option>
                        <option value="Prince Edward Island">Prince Edward Island</option>
                        <option value="Quebec">Quebec</option>
                        <option value="Saskatchewan">Saskatchewan</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>City *</label>
                    <input type="text" id="projectCity" required>
                </div>
                <button type="submit" class="btn-success" style="width: 100%;">Save Project</button>
            </form>
        </div>
    </div>

    <!-- Add Company Modal -->
    <div id="companyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="companyModalTitle">Add New Company</h2>
                <button class="close" onclick="closeCompanyModal()">×</button>
            </div>
            <form id="companyForm" onsubmit="saveCompany(event)">
                <div class="form-group">
                    <label>Company Name *</label>
                    <input type="text" id="companyName" required>
                </div>
                <div class="form-group">
                    <label>Province *</label>
                    <select id="companyProvince" required>
                        <option value="">Select province...</option>
                        <option value="Alberta">Alberta</option>
                        <option value="British Columbia">British Columbia</option>
                        <option value="Manitoba">Manitoba</option>
                        <option value="New Brunswick">New Brunswick</option>
                        <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                        <option value="Nova Scotia">Nova Scotia</option>
                        <option value="Ontario">Ontario</option>
                        <option value="Prince Edward Island">Prince Edward Island</option>
                        <option value="Quebec">Quebec</option>
                        <option value="Saskatchewan">Saskatchewan</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>City *</label>
                    <input type="text" id="companyCity" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="companyEmail">
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="companyNumber">
                </div>
                <button type="submit" class="btn-success" style="width: 100%;">Save Company</button>
            </form>
        </div>
    </div>

    <!-- Add Assignment Modal -->
    <div id="assignmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="assignmentModalTitle">Add New Assignment</h2>
                <button class="close" onclick="closeAssignmentModal()">×</button>
            </div>
            <form id="assignmentForm" onsubmit="saveAssignment(event)">
                <div class="form-group">
                    <label>Project *</label>
                    <select id="assignmentProject" required>
                        <option value="">Select project...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Company *</label>
                    <select id="assignmentCompany" required>
                        <option value="">Select company...</option>
                    </select>
                </div>
                <button type="submit" class="btn-success" style="width: 100%;">Save Assignment</button>
            </form>
        </div>
    </div>

    <script src="scripts/project_manager.js"></script>
</body>

</html>
